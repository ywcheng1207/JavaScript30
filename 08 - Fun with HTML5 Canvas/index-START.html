<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>HTML5 Canvas</title>
    <link rel="icon" href="https://fav.farm/ðŸ”¥" />
  </head>
  <body>
    <!-- åŠ å…¥htmlçš„canvasï¼Œé€™å€‹å…ƒç´ æ˜¯ä¸€å€‹ç¹ªåœ–å€åŸŸ-->
    <canvas id="draw" width="800" height="800"></canvas>
    <script>
      const canvas = document.querySelector('#draw')
      // é€éŽgetContextå¯ä»¥å®šç¾©é€™å€‹ç¹ªåœ–å€åŸŸå…§çš„ç¹ªåœ–æ–¹æ³•
      const ctx = canvas.getContext('2d')
      // canvas.width = window.innerWidth
      // canvas.height = window.innerHeight
      // 2dé€™å€‹æ–¹æ³•æœ‰è¨±å¤šå±¬æ€§ï¼Œåº•ä¸‹é€™å¹¾å€‹å°±æ˜¯ç¯„ä¾‹
      ctx.strokeStyle = '#BADA55'
      ctx.lineJoin = 'round'
      ctx.lineCap = 'round'
      ctx.lineWidth = 50
      // ctx.globalCompositeOperation = 'multiply'

      let isDrawing = false
      let lastX = 0
      let lastY = 0
      let hue = 0
      let direction = true

      // é€™æ˜¯ä½œè€…å®šç¾©çš„ä¸€ç¨®ç¹ªåœ–å‡½å¼
      function draw(e) {
        if (!isDrawing) return
        // é€éŽæ”¹è®Šhslçš„åƒæ•¸ï¼Œåœ¨mousemoveçš„éŽç¨‹ä¸­æ”¹è®Šé¡è‰²
        ctx.strokeStyle = `hsl(${hue},100%,50%)`
        // æ¯æ¬¡åŸ·è¡Œdrawéƒ½æœƒé–‹å•Ÿä¸€å€‹æ–°çš„ç¹ªåœ–è·¯å¾‘
        ctx.beginPath()
        // å®šç¾©ç•«åœ–èµ·å§‹ä½ç½® (éœ€é‡æ¸…ç•«åœ–çš„èµ·å§‹ä½ç½®èˆ‡æ»‘é¼ é»žæ“Šçš„è½é»žä¸ä¸€å®šç›¸åŒ)
        ctx.moveTo(lastX, lastY)
        // é€éŽoffsetå–å¾—æ¸¸æ¨™ä½ç½®ï¼Œè¡¨ç¤ºä»–æœƒå¾žç¹ªåœ–çš„èµ·é»žç•«ç·šè‡³æ¸¸æ¨™çš„ä½ç½®
        ctx.lineTo(e.offsetX, e.offsetY)
        // å‰é¢éƒ½æ˜¯åœ¨å®šç¾©ç•«åœ–çš„æ–¹æ³•ï¼Œè€Œstrokeæ‰æ˜¯å¯¦éš›åŸ·è¡Œã€Œç•«åœ–ã€
        ctx.stroke()
        // æ¸¸æ¨™ç§»å‹•çš„éŽç¨‹ï¼Œèµ·é»žä½ç½®è¦è·Ÿè‘—æ”¹è®Šï¼Œä¸ç„¶å°±æœƒä¸€ç›´å¾žä¸€é–‹å§‹çš„èµ·é»žé€£ç·šåˆ°ç•¶å‰æ¸¸æ¨™çš„ä½ç½®
        lastX = e.offsetX
        lastY = e.offsetY
        hue++
        // è¶…éŽhslçš„åƒæ•¸æœ€å¤§å€¼ï¼Œå°±å›žåˆ°0
        if (hue >= 360) {
          hue = 0
        }
        // è®“ç•«ç­†é€æ¼¸æ”¾å¤§ç¸®å°çš„è¨­å®š
        // é€™è£¡çµ¦ä¸€å€‹directionç‹€æ…‹ï¼Œç•¶é”åˆ°æœ€å¤§æˆ–æœ€å°å€¼å°±æœƒé–‹å§‹éžæ¸›æˆ–éžå¢ž
        if (ctx.lineWidth >= 50 || ctx.lineWidth <= 1) {
          direction = !direction
        }
        if (direction) {
          ctx.lineWidth++
        } else {
          ctx.lineWidth--
        }
      }

      canvas.addEventListener('mousemove', draw)
      canvas.addEventListener('mousedown', (e) => {
        isDrawing = true
        // mousedownçš„çž¬é–“å°±éœ€è¦æ”¹è®Šèµ·é»žä½ç½®ï¼Œä¸ç„¶åœ–å½¢çš„ç¬¬ä¸€ç­†æœƒå¾žä¸€é–‹å§‹çš„(0,0)é€£ç·šè‡³æ¸¸æ¨™ä½ç½®
        lastX = e.offsetX
        lastY = e.offsetY
      })
      canvas.addEventListener('mouseup', () => (isDrawing = false))
      canvas.addEventListener('mouseout', () => (isDrawing = false))
    </script>

    <style>
      html,
      body {
        margin: 0;
      }
      canvas {
        margin: 0 auto;
        display: block;
      }
    </style>
  </body>
</html>
